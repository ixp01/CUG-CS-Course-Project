# Wumpus World Solver

## 概述
这是一个基于联机搜索算法（Online Search Algorithm）的Wumpus世界问题解决方案，使用Python实现。

## Wumpus世界问题介绍
Wumpus世界是人工智能领域中的一个经典问题，用于演示知识表示、推理和规划。在这个世界中，一个探险家（Agent）在一个网格状的洞穴中行走，目标是找到金子并安全地回到起点，同时避免掉入坑洞或者被Wumpus怪兽吃掉。

### 世界组成
- **探险家(Agent)**: 你控制的角色，从左下角(0,0)开始
- **Wumpus怪兽**: 会吃掉探险家的怪物
- **坑洞(Pit)**: 如果探险家掉入坑洞，游戏结束
- **金子(Gold)**: 探险家的目标，需要找到并带回起点

### 感知
探险家可以感知到以下信息：
- **恶臭(Stench)**: 如果Wumpus在相邻的房间
- **微风(Breeze)**: 如果坑洞在相邻的房间
- **发光(Glitter)**: 如果金子在当前房间
- **尖叫(Scream)**: 如果Wumpus被射杀

### 动作
探险家可以执行以下动作：
- **前进(Forward)**: 向前移动一格
- **左转(TurnLeft)**: 向左转90度
- **右转(TurnRight)**: 向右转90度
- **射击(Shoot)**: 发射箭矢（只有一支箭）
- **抓取(Grab)**: 拾取金子
- **攀爬(Climb)**: 从起始位置爬出洞穴

## 联机搜索算法
在本实现中，我们使用了一种联机搜索算法（Online Search Algorithm）来解决Wumpus世界问题。联机搜索的特点是代理人（Agent）在不完全了解环境的情况下，基于当前感知和历史知识做出决策，并在探索过程中不断更新其环境知识。

### 主要策略
1. **安全优先**: 优先探索已知安全的区域
2. **知识推理**: 根据感知推断周围环境的安全性
3. **回溯机制**: 当无法继续前进时，返回之前的位置
4. **风险评估**: 在必要时计算风险，并在风险较低时做出探索决策
5. **目标导向**: 找到金子后优先寻找回到起点的路径

## 使用方法

### 运行程序
```bash
python wumpus_world.py
```

### 中断机制
程序提供了两种中断机制，防止陷入死循环：

1. **自动中断**：当步数超过设定的最大步数(`--max-steps`)时，程序将自动停止执行
2. **手动中断**：在交互模式下，可以随时按`q`键退出程序

这些中断机制确保了程序不会无限运行，特别是在智能体无法找到解决方案的情况下。

### 命令行参数
程序支持以下命令行参数：
- `--size N`: 设置世界大小为NxN (默认: 4)
- `--pits N`: 设置坑洞数量 (默认: 3)
- `--no-wumpus`: 移除Wumpus怪兽
- `--seed N`: 设置随机种子
- `--non-interactive`: 非交互模式，快速运行
- `--delay N`: 设置每步延迟时间(秒) (默认: 0.5)
- `--max-steps N`: 设置最大步数限制 (默认: 100)

示例：
```bash
python wumpus_world.py --size 5 --pits 4 --delay 0.2
```

### 图例
- `^` `>` `v` `<`: 探险家及其朝向
- `W`: Wumpus怪兽
- `P`: 坑洞
- `G`: 金子
- `.`: 安全但未访问
- `w`: 可能有Wumpus
- `p`: 可能有坑洞
- `?`: 危险（可能有Wumpus或坑洞）

## 实现细节

### 知识库
代理人维护一个知识库，记录关于环境的信息：
- 已访问的房间
- 安全的房间
- 可能有Wumpus的房间
- 可能有坑洞的房间

### 决策过程
1. 如果当前房间有金子，抓取金子
2. 如果有金子且在起点，爬出洞穴
3. 如果有金子，尝试回到起点
4. 探索安全的未访问房间
5. 如果无法确定安全路径，考虑回溯
6. 如果必要，进行风险评估并做出决策

## 扩展与改进
1. **优化推理算法**: 增强对Wumpus和坑洞位置的推理能力
2. **增加学习能力**: 加入强化学习或其他学习算法
3. **提高效率**: 优化路径规划和探索策略
4. **图形界面**: 添加图形用户界面，提高可视化效果 