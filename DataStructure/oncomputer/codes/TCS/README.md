# 交通咨询系统 - 数据结构课程设计

## 项目概述

本项目是一个基于Qt的交通咨询系统，实现了图论中的各种最短路径算法，用于解决城市间路径规划问题。

## 功能特性

### 1. 武汉中心性验证
- 验证全国其他省会城市到武汉中间不超过2个省（省会城市）的假设
- 使用BFS算法计算城市间的跳数

### 2. 最短路径查询
- **Dijkstra算法**：单源最短路径算法
- **Floyd-Warshall算法**：全源最短路径算法
- 支持绕过指定城市的路径规划

### 3. 所有路径遍历
- 使用DFS深度优先搜索算法找到所有可行路径
- 限制最大搜索深度（默认10个节点）
- 使用快速排序算法对路径按距离排序

### 4. K短路径算法
- 基于Yen's算法实现
- 找到两城市间的前K条最短路径
- 支持自定义K值（1-20）

### 5. 结果导出
- 导出详细的查询结果到文本文件
- 包含路径信息、总长度和算法比较结果

## 系统架构

```
交通咨询系统
├── 图数据结构 (CityGraph)
│   ├── CSV数据加载
│   ├── 邻接表表示
│   └── 城市索引管理
├── 核心算法
│   ├── Dijkstra算法
│   ├── Floyd-Warshall算法
│   ├── DFS路径遍历
│   ├── 快速排序
│   └── Yen's K短路径算法
└── Qt用户界面
    ├── 控制面板
    ├── 结果展示
    └── 数据导出
```

## 编译运行

### 环境要求
- Qt 5.12 或更高版本
- C++17 支持的编译器
- CMake 3.16+ 或 qmake

### 编译步骤

1. **使用Qt Creator（推荐）**
   ```bash
   # 打开Qt Creator
   # 文件 -> 打开文件或项目 -> 选择TCS.pro
   # 点击运行按钮
   ```

2. **使用命令行**
   ```bash
   qmake TCS.pro
   make
   ./TCS  # Linux/macOS
   TCS.exe  # Windows
   ```

## 使用指南

### 1. 数据加载
- 系统启动时会自动加载`省会城市邻接矩阵.csv`文件
- 也可以通过"加载CSV数据"按钮手动加载其他数据文件

### 2. 验证武汉中心性
- 点击"验证武汉中心性"按钮
- 系统会检查所有省会城市是否可以在2跳内到达武汉

### 3. 查找最短路径
- 选择起点和终点城市
- 选择算法（Dijkstra/Floyd）
- 可选择绕过的城市
- 点击"查找最短路径"按钮

### 4. 查找所有路径
- 设置最大搜索深度
- 点击"查找所有路径"按钮
- 结果会自动按距离排序显示

### 5. 查找K短路径
- 设置K值（要查找的路径数量）
- 点击"查找K短路径"按钮

### 6. 导出结果
- 查询完成后点击"导出结果"按钮
- 选择保存位置，结果将保存为文本文件

## 数据格式

CSV文件格式要求：
- 第一行：城市名称（第一列为"Unnamed: 0"，从第二列开始为城市名）
- 后续行：距离矩阵，空值或0表示无直接连接

示例：
```csv
Unnamed: 0,北京,上海,天津
北京,,,
上海,1065.0,,
天津,104.0,963.0,
```

## 算法复杂度

- **Dijkstra算法**: O((V + E) log V)
- **Floyd-Warshall算法**: O(V³)
- **DFS遍历**: O(V!)，通过深度限制优化
- **快速排序**: O(n log n)
- **Yen's算法**: O(K * V * (E + V log V))

其中 V 为城市数量，E 为道路数量，K 为要找的路径数量。

## 技术特点

1. **数据结构优化**
   - 使用邻接表存储图，节省空间
   - 优先队列优化Dijkstra算法
   - 回溯法实现DFS遍历

2. **界面友好**
   - 直观的Qt图形界面
   - 实时进度显示
   - 结果表格展示

3. **功能完整**
   - 涵盖课程设计所有要求
   - 支持多种算法比较
   - 完整的结果导出功能

## 项目文件说明

- `main.cpp` - 程序入口
- `mainwindow.h/cpp` - 主窗口界面
- `citygraph.h/cpp` - 图数据结构和算法实现
- `TCS.pro` - Qt项目配置文件
- `省会城市邻接矩阵.csv` - 城市距离数据

## 作者信息

数据结构课程设计项目
实现了图论中的经典算法和现代路径查找技术

---

**注意事项**：
1. 确保CSV数据文件格式正确
2. 大规模数据查询所有路径时请适当调整最大深度限制
3. K短路径算法在K值较大时可能需要较长计算时间 