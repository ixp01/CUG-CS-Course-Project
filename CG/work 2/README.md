# Sutherland-Hodgeman 多边形裁剪算法

## 📋 项目简介

这是一个完整实现 **Sutherland-Hodgeman 多边形裁剪算法** 的 C++ + OpenGL 程序，用于完成计算机图形学课程的实验作业（课本 p172-T6.15）。

## 🎨 视觉效果

程序运行后会显示 **3个窗口**，颜色方案已优化：

### 窗口1：原始图形
- **淡蓝色填充**：原始多边形
- **红色粗边框**：裁剪窗口
- **深红色圆点**：顶点标记
- **黑色文字**：顶点编号

### 窗口2：裁剪结果
- **淡绿色填充**：裁剪后的多边形
- **灰色边框**：裁剪窗口
- **深绿色圆点**：结果顶点
- **黑色文字**：顶点编号

### 窗口3：裁剪步骤（2×2网格）
- **左上（浅橙色）**：步骤1 - 左边界裁剪
- **右上（浅黄色）**：步骤2 - 下边界裁剪
- **左下（浅紫色）**：步骤3 - 右边界裁剪
- **右下（浅青色）**：步骤4 - 上边界裁剪

## 🚀 快速开始

### 1. 配置 GLUT 库

#### 方法A：使用项目属性配置（推荐）

1. 右键项目 → 属性
2. **链接器** → **输入** → **附加依赖项**，添加：
   ```
   opengl32.lib
   glu32.lib
   glut32.lib
   ```
3. 如果没有 glut32.lib，下载并放置到项目目录，然后：
   - **链接器** → **常规** → **附加库目录**：添加 `$(ProjectDir)`

#### 方法B：代码已包含自动链接

代码中已添加：
```cpp
#pragma comment(lib, "opengl32.lib")
#pragma comment(lib, "glu32.lib")
```

### 2. 获取 GLUT 库文件

如果系统中没有 GLUT，需要下载：
- **glut32.dll** → 放到 `x64\Debug\` 或 `Debug\` 目录
- **glut32.lib** → 放到项目根目录

### 3. 编译运行

1. 打开 `work 2.sln`
2. 选择配置：**Debug** / **x64**
3. 按 `F5` 运行

## 📊 测试数据

**原始多边形**（7个顶点）：
```
P0(210, 160), P1(90, 240), P2(30, 140), P3(90, 20),
P4(180, 100), P5(240, 20), P6(360, 180)
```

**裁剪窗口**：
```
xmin = 100, ymin = 100
xmax = 300, ymax = 300
```

可以在代码中修改这些数据进行测试。

## 🔧 自定义配置

### 修改多边形顶点

在 `main()` 函数中修改（第163行）：
```cpp
VERTEX p[7] = { {210, 160}, {90, 240}, ... };
```

### 修改裁剪窗口

在全局变量中修改（第18行）：
```cpp
RECT_WINDOW clipWindow = { 100, 100, 300, 300 };
```

### 修改窗口大小

在全局变量中修改（第23行）：
```cpp
int winWidth = 800, winHeight = 600;
```

### 修改颜色

在 `Display()`, `Displayw()`, `DisplaySteps()` 函数中修改 RGB 值。

## 📝 控制台输出

程序运行时会在控制台输出裁剪过程的详细信息：
- 每一步的顶点数量
- 每一步的顶点坐标
- 便于写实验报告

## 📄 实验报告

已生成完整的 Markdown 格式实验报告：
- **文件名**：`实验报告.md`
- **内容包括**：
  - 实验目的
  - 实验原理（详细讲解算法）
  - 实验步骤及源码
  - 实验结果及分析

可以直接转换为 Word 或 PDF 提交。

## 🎯 算法核心

### 4个关键函数

1. **IsInside()**：判断点在边界内侧还是外侧
2. **GetIntersection()**：计算多边形边与裁剪边界的交点
3. **ClipByEdge()**：对单条边界进行裁剪
4. **SutherlandHodgeman()**：完整的4次裁剪过程

### 裁剪顺序

```
原始多边形
  ↓
左边界裁剪 (x ≥ xmin)
  ↓
下边界裁剪 (y ≥ ymin)
  ↓
右边界裁剪 (x ≤ xmax)
  ↓
上边界裁剪 (y ≤ ymax)
  ↓
最终结果
```

## ❓ 常见问题

### Q1: 编译错误 "无法解析的外部符号 glutInit"
**A:** 需要配置 GLUT 库。参考上面的"配置 GLUT 库"部分。

### Q2: 运行时找不到 glut32.dll
**A:** 将 `glut32.dll` 复制到 exe 所在目录（`x64\Debug\` 或 `Debug\`）。

### Q3: 窗口显示不完整
**A:** 调整 `winWidth` 和 `winHeight` 的值，或调整显示器缩放比例。

### Q4: 想要修改颜色
**A:** 在 `Display()`, `Displayw()`, `DisplaySteps()` 函数中修改 `glColor3f()` 和 `RGB()` 的参数。

## 📚 文件说明

- `work 2.cpp` - 主程序源代码
- `实验报告.md` - 完整的实验报告（Markdown格式）
- `README.md` - 本说明文件
- `work 2.sln` - Visual Studio 解决方案文件

## ✅ 功能清单

- [x] Sutherland-Hodgeman 算法实现
- [x] 4个裁剪步骤的中间结果保存
- [x] 原始多边形可视化
- [x] 裁剪结果可视化
- [x] 中间步骤可视化（2×2网格）
- [x] 顶点标注和编号
- [x] 控制台输出详细过程
- [x] 美化的颜色方案
- [x] 完整的实验报告

## 🎓 适用课程

- 计算机图形学
- 图形学算法
- 计算几何

## 📞 技术支持

如有问题，可以：
1. 检查代码注释
2. 阅读实验报告中的"实验原理"部分
3. 参考课本 p172-T6.15 和图6-31

---

**开发日期**：2025年10月16日  
**提交截止**：2025年10月20日










