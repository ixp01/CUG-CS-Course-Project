# 教育基金会管理系统

## 项目简介

这是一个基于Qt C++开发的教育基金会管理系统，用于管理捐助申请、用款申请和财政报表。

## 功能模块

### 1. 捐助管理
- **捐助申请提交**：企业或个人可以提交捐助申请
- **身份确认审核**：管理员对捐助者身份进行确认
- **捐助人登记**：系统自动登记捐助人信息
- **证书生成**：审核通过后自动生成带编号的捐助证书
- **款项入账**：捐助金额计入财务收入

### 2. 用款申请管理
- **申请提交**：中小学教育单位提交用款申请
- **合法性校验**：系统自动检查用途是否包含教育相关关键词
- **余额检查**：审批时自动验证账户余额是否充足
- **审批流程**：支持通过/拒绝，并可添加审批意见
- **款项支出**：审批通过后自动从账户扣除款项

### 3. 财政报表
- **月度报表**：按月份查看收支明细
- **统计概览**：实时显示总收入、总支出、账户余额
- **月度统计**：显示当月收入和支出
- **报表导出**：支持将财政报表导出为文本文件

## 系统特点

✅ **内存存储**：所有数据存储在内存中，程序重启后数据清空  
✅ **无需数据库**：不依赖外部数据库，开箱即用  
✅ **现代UI**：采用现代化的界面设计，左侧导航栏+右侧内容区  
✅ **实时统计**：系统概况实时更新，包括待审核数量提醒  
✅ **数据验证**：完善的输入验证和业务逻辑校验  

## 技术栈

- **开发语言**：C++ 17
- **GUI框架**：Qt 5/6 (widgets)
- **数据存储**：内存 (QList)
- **设计模式**：单例模式 (DataManager)

## 编译和运行

### 前置要求
- Qt 5.x 或 Qt 6.x
- Qt Creator (推荐) 或 qmake
- C++17 支持的编译器 (MSVC, GCC, Clang)

### 使用Qt Creator编译
1. 打开 Qt Creator
2. 文件 → 打开文件或项目 → 选择 `work2p.pro`
3. 配置套件 (Kit)
4. 点击左下角绿色的"运行"按钮

### 使用命令行编译 (Windows)
```bash
cd "d:\myCollege\CS class\SE\work2\work2p"
qmake work2p.pro
nmake         # 或 mingw32-make (如果使用MinGW)
```

### 使用命令行编译 (Linux/Mac)
```bash
cd work2p
qmake work2p.pro
make
./work2p
```

## 使用说明

### 捐助流程
1. 点击左侧导航"捐助管理"
2. 点击"新增捐助申请"按钮
3. 填写捐助人信息（类型、姓名、证件号、金额等）
4. 提交后状态为"待审核"
5. 选中待审核记录，点击"审核通过"或"审核拒绝"
6. 审核通过后生成证书编号，点击"查看证书"可查看

### 用款流程
1. 点击左侧导航"用款申请"
2. 点击"新增用款申请"按钮
3. 填写学校信息和用款用途
4. 系统自动进行合法性校验（检查是否包含教育相关关键词）
5. 提交后状态为"待审核"
6. 管理员审核时系统自动检查余额是否充足
7. 审核通过后款项自动从账户扣除

### 查看报表
1. 点击左侧导航"财政报表"
2. 顶部显示总体财务状况（总收入、总支出、余额）
3. 选择年份和月份查看月度报表
4. 点击"导出报表"可将当月报表导出为文本文件

## 项目结构

```
work2p/
├── main.cpp                    # 程序入口
├── mainwindow.h/cpp/ui         # 主窗口（导航框架）
├── datamanager.h/cpp           # 数据管理类（单例）
├── donationwidget.h/cpp/ui     # 捐助管理模块
├── donationdialog.h/cpp        # 捐助申请对话框
├── applicationwidget.h/cpp/ui  # 用款申请模块
├── applicationdialog.h/cpp     # 用款申请对话框
├── reportwidget.h/cpp/ui       # 财政报表模块
├── work2p.pro                  # Qt项目配置文件
├── README.md                   # 本文档
└── build/                      # 编译输出目录
```

## 数据结构

### DonationRecord (捐助记录)
- id: 记录ID
- donorType: 捐助类型（企业/个人）
- donorName: 捐助人姓名
- idNumber: 身份证号/营业执照号
- contact: 联系方式
- amount: 捐助金额
- description: 捐助说明
- status: 状态（待审核/已通过/已拒绝）
- submitTime: 提交时间
- approveTime: 审核时间
- certificateNo: 证书编号

### ApplicationRecord (用款申请记录)
- id: 记录ID
- schoolName: 学校名称
- applicant: 申请人
- contact: 联系方式
- amount: 申请金额
- purpose: 用款用途
- status: 状态（待审核/已通过/已拒绝）
- submitTime: 提交时间
- approveTime: 审核时间
- approveComment: 审批意见

### FinanceRecord (财务记录)
- id: 记录ID
- type: 类型（收入/支出）
- amount: 金额
- description: 说明
- recordTime: 记录时间
- relatedId: 关联的捐助或申请ID

## 注意事项

⚠️ **数据不持久化**：本系统采用内存存储，程序关闭后所有数据将清空  
⚠️ **测试数据**：每次启动程序都是全新的空数据库，适合演示和测试  
⚠️ **余额控制**：用款申请审批时会自动检查余额，余额不足时无法通过  

## 作业要求对照

### 要求1：捐助管理 ✅
- [x] 企业或个人提出捐助请求
- [x] 经身份确认后接受
- [x] 对捐助人进行登记
- [x] 授予捐助证书
- [x] 捐款存入银行（计入财务收入）

### 要求2：用款申请 ✅
- [x] 中小学教育单位提出用款申请
- [x] 进行相应的合法性校验
- [x] 做出支出（从账户扣款）

### 要求3：财政报表 ✅
- [x] 每月给教育基金会理事会提供财政状况报表
- [x] 列出本月的收入和支出情况
- [x] 显示资金余额

## 界面预览

### 主界面
- 左侧深色导航栏，包含Logo和功能菜单
- 右侧内容区域，顶部显示系统概况统计
- 各功能模块采用表格+按钮的布局

### 颜色方案
- 主色调：`#1890ff` (蓝色)
- 成功色：`#52c41a` (绿色)
- 警告色：`#faad14` (橙色)
- 错误色：`#ff4d4f` (红色)
- 背景色：`#f0f2f5` (浅灰)
- 导航栏：`#001529` (深蓝黑)

## 开发者

课程实验2 - 软件工程上机作业

## 许可证

本项目仅用于教学和学习目的。


